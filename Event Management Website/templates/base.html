<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Dashboard{% endblock %}</title>
    
    <!-- Link to external stylesheet using url_for -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>

    <!-- Navigation Bar -->
    <div class="navbar">
        <!-- Search Bar on the left -->
        <form method="GET" action="{{ url_for('search') }}" class="search-form">
            <input type="text" name="query" class="search-bar" placeholder="Search events..." required>
            <button type="submit" class="search-button">Search</button>
        </form>


        <!-- Centered links -->
        <a style="border-radius: 5px;" href="/dashboard" class="{% if page == 'dashboard' %}active{% endif %}">Dashboard</a>

        <!-- Dropdown Container -->
        <div class="dropdown">
            <button class="dropbtn">Events</button>
            <div class="dropdown-content">
                <a href="/hosted_events" class="{% if page == 'hosted_events' %}active{% endif %}">Hosted Events</a>
                <a href="/attending_events" class="{% if page == 'attending_events' %}active{% endif %}">Attending Events</a>
                <a href="/create_event" class="{% if page == 'create_event' %}active{% endif %}">Create Event</a>
            </div>
        </div>

        <!-- Right-aligned links -->
        <div class="navbar-right">
            <a href="/profile" class="{% if page == 'profile' %}active{% endif %}">Profile</a>
            <a href="/logout">Logout</a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        {% block content %}{% endblock %}
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Event Management</p>
    </footer>

    <script>
    // Toggle dropdown display on button click
    document.querySelector('.dropbtn').addEventListener('click', function() {
        var dropdownContent = document.querySelector('.dropdown-content');
        if (dropdownContent.style.display === "block") {
            dropdownContent.style.display = "none";
        } else {
            dropdownContent.style.display = "block";
        }
    });

    // Close dropdown if clicked outside of it
    window.onclick = function(event) {
        if (!event.target.matches('.dropbtn')) {
            var dropdowns = document.querySelectorAll('.dropdown-content');
            dropdowns.forEach(function(dropdown) {
                if (dropdown.style.display === "block") {
                    dropdown.style.display = "none";
                }
            });
        }
    };
    </script>

    <!-- Optional block for page-specific scripts -->
    {% block script %}{% endblock %}

</body>
</html>
